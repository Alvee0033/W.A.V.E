/* AI page styles */
:root {
  --bg: radial-gradient(1200px 1200px at 50% 100%, #0b0f14 0%, #07090c 45%, #050608 100%);
  --panel: rgba(18, 24, 30, 0.9);
  --border: rgba(255,255,255,0.12);
  --soft-border: rgba(255,255,255,0.08);
  --chip: rgba(56, 189, 248, 0.15);
  --chip-hover: rgba(56, 189, 248, 0.25);
  --chip-active: rgba(16, 185, 129, 0.25);
}

html, body { height: 100%; margin: 0; background: var(--bg); }

.context-panel {
  background: linear-gradient(180deg, rgba(20,26,32,0.7), rgba(20,26,32,0.9));
  backdrop-filter: blur(10px);
  border-right: 1px solid var(--soft-border);
}

.chip {
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid var(--soft-border);
  background: var(--chip);
  color: #a5f3fc; /* sky-200 */
  font-size: 12px;
  transition: all .2s ease;
}
.chip:hover { background: var(--chip-hover); transform: translateY(-1px); }
.chip.active { background: var(--chip-active); color: #86efac; border-color: rgba(16,185,129,0.4); }

.ctx-input {
  width: 100%;
  border-radius: 8px;
  background: rgba(24, 32, 40, 0.9);
  border: 1px solid var(--soft-border);
  padding: 6px 8px;
  font-size: 13px;
  color: #e5e7eb;
}

.chat-area { display: grid; grid-template-rows: auto 1fr auto; }
.chat-header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 12px 16px; border-bottom: 1px solid var(--soft-border);
  background: linear-gradient(90deg, rgba(24,30,38,0.8), rgba(24,30,38,0.6));
  backdrop-filter: blur(8px);
}
.messages { padding: 16px; overflow-y: auto; }
.msg { display: flex; margin-bottom: 12px; }
.msg.user { justify-content: flex-end; }
.bubble {
  max-width: 72ch; line-height: 1.45;
  padding: 10px 12px; border-radius: 14px;
  border: 1px solid var(--soft-border);
  background: var(--panel); box-shadow: 0 8px 24px rgba(0,0,0,.35);
}
.bubble.card { background: rgba(20,26,32,0.85); }
.bubble .card .section { margin-bottom: 10px; }
.bubble .card .section-title { font-size: 12px; text-transform: uppercase; letter-spacing: .04em; color: #a1a1aa; margin-bottom: 6px; }
.bubble .card p { margin: 0; color: #e5e7eb; }
.bubble .card ul { margin: 0; padding-left: 16px; }
.bubble .card ul.refs { color: #93c5fd; }
.msg.user .bubble { background: rgba(16,185,129,0.15); color: #d1fae5; border-color: rgba(16,185,129,0.35); }

.chat-input { border-top: 1px solid var(--soft-border); padding: 10px 16px; backdrop-filter: blur(8px);
  background: linear-gradient(90deg, rgba(24,30,38,0.8), rgba(24,30,38,0.6)); position: sticky; bottom: 0; }
.input {
  flex: 1; border-radius: 12px; background: rgba(24,32,40,0.9);
  border: 1px solid var(--soft-border); padding: 10px 12px; font-size: 14px; color: #e5e7eb;
}
.send {
  padding: 10px 14px; border-radius: 12px; background: linear-gradient(90deg, #10b981, #22c55e);
  color: white; font-weight: 600; border: 1px solid rgba(255,255,255,0.15); transition: transform .15s ease, box-shadow .2s;
  box-shadow: 0 8px 20px rgba(16,185,129,0.25);
}
.send:hover { transform: translateY(-1px); }
.send:active { transform: scale(0.98); }
.send svg { margin-right: 6px; }
.send .send-text { vertical-align: middle; }

.suggestions { display: flex; gap: 8px; margin-top: 8px; flex-wrap: wrap; }
.sugg { font-size: 12px; padding: 6px 10px; border-radius: 999px; border: 1px solid var(--soft-border); color: #ddd;
  background: rgba(255,255,255,0.06); transition: all .2s; }
.sugg:hover { background: rgba(255,255,255,0.12); }

/* Voice mic button */
.mic {
  padding: 8px 10px;
  border-radius: 12px;
  border: 1px solid rgba(99,102,241,0.35);
  background: rgba(99,102,241,0.20);
  color: #c7d2fe; /* indigo-200 */
  transition: transform .15s ease, box-shadow .2s;
}
.mic:hover { transform: translateY(-1px); }
.mic.listening { background: rgba(99,102,241,0.40); box-shadow: 0 0 0 2px rgba(99,102,241,0.35) inset; }

/* Mobile top bar and drawer */
.mobile-topbar {
  display: none;
  align-items: center;
  justify-content: space-between;
  padding: 10px 12px;
  border-bottom: 1px solid var(--soft-border);
  background: rgba(18,24,30,0.7);
  backdrop-filter: blur(8px);
}
.topbar-btn {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 8px 10px;
  border-radius: 10px;
  border: 1px solid var(--soft-border);
  background: rgba(24, 32, 40, 0.8);
  color: #e5e7eb;
}
.drawer-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.5); backdrop-filter: blur(2px); display: none; z-index: 30; }
.drawer-backdrop.show { display: block; }

/* Responsive adjustments */
@media (max-width: 1024px) {
  .bubble { max-width: 80%; }
}

@media (max-width: 768px) {
  #aiApp { display: grid; grid-template-columns: 1fr; grid-template-rows: auto 1fr; height: 100vh; }
  .mobile-topbar { display: flex; }
  .context-panel {
    position: fixed; z-index: 40; top: 0; bottom: 0; left: 0;
    width: 86%; max-width: 360px; transform: translateX(-100%);
    transition: transform .25s ease;
  }
  .context-panel.open { transform: translateX(0); }
  .messages { padding-bottom: calc(72px + env(safe-area-inset-bottom)); }
  .chat-input { position: fixed; bottom: 0; left: 0; right: 0; padding-bottom: calc(10px + env(safe-area-inset-bottom)); z-index: 30; }
}

/* Chip rows scrollable on mobile */
@media (max-width: 768px) {
  #anomalyChips, #layerChips { display: flex; flex-wrap: nowrap; overflow-x: auto; gap: 8px; padding-bottom: 6px; }
}

/* Safe-area support */
.chat-input { padding-bottom: max(10px, env(safe-area-inset-bottom)); }