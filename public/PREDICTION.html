<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AI Prediction • Climate & Environmental Forecasting</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link rel="icon" href='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="50" fill="%2300a2ff"/><circle cx="50" cy="50" r="42" fill="%23111" opacity=".15"/></svg>' />
  <style>
    * {
      font-family: 'Inter', sans-serif;
    }
    .gradient-bg {
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%);
      min-height: 100vh;
    }
    .glass-panel {
      background: rgba(15, 23, 42, 0.95);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(148, 163, 184, 0.1);
      box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
    }
    .prediction-card {
      background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(59, 130, 246, 0.1) 100%);
      border: 1px solid rgba(16, 185, 129, 0.2);
      transition: all 0.3s ease;
    }
    .prediction-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 40px rgba(16, 185, 129, 0.15);
    }
    .risk-high {
      background: linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(220, 38, 38, 0.1) 100%);
      border-color: rgba(239, 68, 68, 0.3);
      transition: all 0.3s ease;
    }
    .risk-high:hover {
      box-shadow: 0 8px 25px rgba(239, 68, 68, 0.15);
    }
    .risk-medium {
      background: linear-gradient(135deg, rgba(245, 158, 11, 0.1) 0%, rgba(217, 119, 6, 0.1) 100%);
      border-color: rgba(245, 158, 11, 0.3);
      transition: all 0.3s ease;
    }
    .risk-medium:hover {
      box-shadow: 0 8px 25px rgba(245, 158, 11, 0.15);
    }
    .risk-low {
      background: linear-gradient(135deg, rgba(34, 197, 94, 0.1) 0%, rgba(22, 163, 74, 0.1) 100%);
      border-color: rgba(34, 197, 94, 0.3);
      transition: all 0.3s ease;
    }
    .risk-low:hover {
      box-shadow: 0 8px 25px rgba(34, 197, 94, 0.15);
    }
    .chart-container {
      min-height: 250px;
      background: rgba(30, 41, 59, 0.5);
      border-radius: 0.75rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    @media (min-width: 768px) {
      .chart-container {
        min-height: 300px;
      }
    }
    .btn-primary {
      background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
      transition: all 0.3s ease;
    }
    .btn-primary:hover {
      background: linear-gradient(135deg, #2563eb 0%, #7c3aed 100%);
      transform: translateY(-1px);
      box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
    }
    .animate-pulse-slow {
      animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }
  </style>
</head>
<body class="gradient-bg text-white min-h-screen">
  <!-- Navigation Header -->
  <nav class="glass-panel border-b border-slate-700/50 px-4 py-4 md:px-6">
    <div class="flex items-center justify-between">
      <div class="flex items-center gap-3 md:gap-4">
        <a href="/public/EARTH.html" class="flex items-center gap-2 text-emerald-400 hover:text-emerald-300 transition-all duration-200 hover:scale-105">
          <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
            <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.42-1.41L7.83 13H20v-2z"/>
          </svg>
          <span class="text-sm font-medium hidden sm:inline">Back to Earth</span>
        </a>
        <div class="h-6 w-px bg-slate-600 hidden md:block"></div>
        <div>
          <h1 class="text-lg md:text-xl font-bold bg-gradient-to-r from-emerald-400 to-blue-400 bg-clip-text text-transparent">AI Prediction</h1>
          <p class="text-xs text-slate-400">Climate & Environmental Forecasting</p>
        </div>
      </div>
      <div class="flex items-center gap-2">
        <div class="w-2 h-2 rounded-full bg-emerald-400 animate-pulse-slow"></div>
        <span class="text-xs text-emerald-300 hidden sm:inline">AI Active</span>
      </div>
    </div>
  </nav>

  <div class="container mx-auto px-4 py-4 md:py-6 max-w-7xl">
    <!-- Main Grid Layout -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6">
      <!-- Left Column: Controls & Settings -->
      <div class="lg:col-span-1 space-y-4 md:space-y-6 order-2 lg:order-1">
        <!-- Prediction Type Selector -->
        <div class="glass-panel rounded-xl p-4 md:p-6">
          <h2 class="text-lg font-semibold mb-4 flex items-center gap-2">
            <svg class="w-5 h-5 text-blue-400" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
            </svg>
            Prediction Type
          </h2>
          <div class="space-y-3">
            <label class="flex items-center gap-3 p-3 rounded-lg border border-slate-600 hover:border-blue-400/50 cursor-pointer transition-all duration-200 hover:bg-slate-800/50">
              <input type="radio" name="predictionType" value="climate" class="text-blue-500 focus:ring-blue-400" checked>
              <div>
                <div class="font-medium">Climate Modeling</div>
                <div class="text-xs text-slate-400">Long-term climate predictions</div>
              </div>
            </label>
            <label class="flex items-center gap-3 p-3 rounded-lg border border-slate-600 hover:border-amber-400/50 cursor-pointer transition-all duration-200 hover:bg-slate-800/50">
              <input type="radio" name="predictionType" value="anomaly" class="text-amber-500 focus:ring-amber-400">
              <div>
                <div class="font-medium">Anomaly Prediction</div>
                <div class="text-xs text-slate-400">Wildfire, flood, storm forecasts</div>
              </div>
            </label>
            <label class="flex items-center gap-3 p-3 rounded-lg border border-slate-600 hover:border-red-400/50 cursor-pointer transition-all duration-200 hover:bg-slate-800/50">
              <input type="radio" name="predictionType" value="risk" class="text-red-500 focus:ring-red-400">
              <div>
                <div class="font-medium">Risk Assessment</div>
                <div class="text-xs text-slate-400">Environmental risk analysis</div>
              </div>
            </label>
          </div>
        </div>

        <!-- Location Selector -->
        <div class="glass-panel rounded-xl p-4 md:p-6">
          <h2 class="text-lg font-semibold mb-4 flex items-center gap-2">
            <svg class="w-5 h-5 text-emerald-400" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
            </svg>
            Target Location
          </h2>
          <div class="space-y-4">
            <div>
              <label class="block text-sm text-slate-300 mb-2">Search Location</label>
              <input type="text" id="locationInput" placeholder="Enter city, region, or coordinates..." class="w-full px-3 py-2 bg-slate-800/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-emerald-400/50 text-sm">
            </div>
            <div class="grid grid-cols-2 gap-3">
              <div>
                <label class="block text-sm text-slate-300 mb-2">Latitude</label>
                <input type="number" id="latInput" placeholder="40.7128" step="0.0001" class="w-full px-3 py-2 bg-slate-800/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-emerald-400/50 text-sm">
              </div>
              <div>
                <label class="block text-sm text-slate-300 mb-2">Longitude</label>
                <input type="number" id="lonInput" placeholder="-74.0060" step="0.0001" class="w-full px-3 py-2 bg-slate-800/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-emerald-400/50 text-sm">
              </div>
            </div>
            <button id="useLocationBtn" class="w-full px-4 py-2 bg-gradient-to-r from-emerald-600 to-green-600 hover:from-emerald-500 hover:to-green-500 rounded-lg font-medium transition-all duration-200 hover:scale-105">
              <svg class="w-4 h-4 inline mr-2" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
              </svg>
              Use Current Location
            </button>
          </div>
        </div>

        <!-- Time Range -->
        <div class="glass-panel rounded-xl p-4 md:p-6">
          <h2 class="text-lg font-semibold mb-4 flex items-center gap-2">
            <svg class="w-5 h-5 text-purple-400" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
            </svg>
            Prediction Timeline
          </h2>
          <div class="space-y-4">
            <div>
              <label class="block text-sm text-slate-300 mb-2">Forecast Period</label>
              <select id="forecastPeriod" class="w-full px-3 py-2 bg-slate-800/50 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-400/50 text-sm">
                <option value="7">Next 7 Days</option>
                <option value="30">Next 30 Days</option>
                <option value="90">Next 3 Months</option>
                <option value="365">Next Year</option>
                <option value="1825">Next 5 Years</option>
              </select>
            </div>
            <div class="grid grid-cols-2 gap-3">
              <div>
                <label class="block text-sm text-slate-300 mb-2">Start Date</label>
                <input type="date" id="startDate" class="w-full px-3 py-2 bg-slate-800/50 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-400/50 text-sm">
              </div>
              <div>
                <label class="block text-sm text-slate-300 mb-2">End Date</label>
                <input type="date" id="endDate" class="w-full px-3 py-2 bg-slate-800/50 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-400/50 text-sm">
              </div>
            </div>
          </div>
        </div>

        <!-- Generate Prediction Button -->
        <button id="generateBtn" class="w-full px-6 py-4 btn-primary rounded-xl font-semibold text-lg transition-all duration-300 hover:scale-105 shadow-lg">
          <div class="flex items-center justify-center gap-2">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
            </svg>
            Generate AI Prediction
          </div>
        </button>
      </div>

      <!-- Right Column: Results & Visualizations -->
      <div class="lg:col-span-2 space-y-4 md:space-y-6 order-1 lg:order-2">
        <!-- Prediction Results Header -->
        <div class="glass-panel rounded-xl p-4 md:p-6">
          <div class="flex flex-col sm:flex-row sm:items-center justify-between mb-4 gap-3">
            <h2 class="text-xl md:text-2xl font-bold">Prediction Results</h2>
            <div class="flex items-center gap-2">
              <div class="w-2 h-2 rounded-full bg-emerald-400 animate-pulse-slow"></div>
              <span class="text-sm text-emerald-300" id="confidenceLevel">Model Confidence: 87%</span>
            </div>
          </div>
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4">
            <div class="prediction-card rounded-lg p-3 md:p-4">
              <div class="flex items-center gap-2 mb-2">
                <svg class="w-4 h-4 text-blue-400" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                </svg>
                <span class="text-sm font-medium">Temperature</span>
              </div>
              <div class="text-xl md:text-2xl font-bold text-blue-300" id="tempValue">+2.3°C</div>
              <div class="text-xs text-slate-400">Above average</div>
            </div>
            <div class="prediction-card rounded-lg p-3 md:p-4">
              <div class="flex items-center gap-2 mb-2">
                <svg class="w-4 h-4 text-cyan-400" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"/>
                </svg>
                <span class="text-sm font-medium">Precipitation</span>
              </div>
              <div class="text-xl md:text-2xl font-bold text-cyan-300" id="precipValue">145mm</div>
              <div class="text-xs text-slate-400">15% above normal</div>
            </div>
            <div class="prediction-card rounded-lg p-3 md:p-4">
              <div class="flex items-center gap-2 mb-2">
                <svg class="w-4 h-4 text-amber-400" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                </svg>
                <span class="text-sm font-medium">Humidity</span>
              </div>
              <div class="text-xl md:text-2xl font-bold text-amber-300" id="humidityValue">68%</div>
              <div class="text-xs text-slate-400">Optimal range</div>
            </div>
          </div>
        </div>

        <!-- Risk Assessment Cards -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
          <div class="glass-panel rounded-xl p-4 md:p-6">
            <h3 class="text-lg font-semibold mb-4">Environmental Risks</h3>
            <div class="space-y-3">
              <div class="risk-high rounded-lg p-3">
                <div class="flex items-center justify-between mb-2">
                  <span class="font-medium">Wildfire Risk</span>
                  <span class="text-sm px-2 py-1 bg-red-500/20 text-red-300 rounded">High</span>
                </div>
                <div class="text-sm text-slate-300">Dry conditions and high temperatures increase fire probability by 73%</div>
                <div class="mt-2 bg-red-500/20 rounded-full h-2">
                  <div class="bg-red-500 h-2 rounded-full transition-all duration-1000" style="width: 73%"></div>
                </div>
              </div>
              <div class="risk-medium rounded-lg p-3">
                <div class="flex items-center justify-between mb-2">
                  <span class="font-medium">Flood Risk</span>
                  <span class="text-sm px-2 py-1 bg-amber-500/20 text-amber-300 rounded">Medium</span>
                </div>
                <div class="text-sm text-slate-300">Increased precipitation may cause localized flooding in low-lying areas</div>
                <div class="mt-2 bg-amber-500/20 rounded-full h-2">
                  <div class="bg-amber-500 h-2 rounded-full transition-all duration-1000" style="width: 45%"></div>
                </div>
              </div>
              <div class="risk-low rounded-lg p-3">
                <div class="flex items-center justify-between mb-2">
                  <span class="font-medium">Storm Risk</span>
                  <span class="text-sm px-2 py-1 bg-emerald-500/20 text-emerald-300 rounded">Low</span>
                </div>
                <div class="text-sm text-slate-300">Stable atmospheric conditions reduce severe weather likelihood</div>
                <div class="mt-2 bg-emerald-500/20 rounded-full h-2">
                  <div class="bg-emerald-500 h-2 rounded-full transition-all duration-1000" style="width: 18%"></div>
                </div>
              </div>
            </div>
          </div>

          <div class="glass-panel rounded-xl p-4 md:p-6">
            <h3 class="text-lg font-semibold mb-4">Climate Indicators</h3>
            <div class="space-y-3 md:space-y-4">
              <div class="flex items-center justify-between">
                <span class="text-sm">Sea Surface Temperature</span>
                <span class="text-sm font-medium text-blue-300" id="sstValue">+1.2°C</span>
              </div>
              <div class="flex items-center justify-between">
                <span class="text-sm">Vegetation Health (NDVI)</span>
                <span class="text-sm font-medium text-emerald-300" id="ndviValue">0.67</span>
              </div>
              <div class="flex items-center justify-between">
                <span class="text-sm">Soil Moisture</span>
                <span class="text-sm font-medium text-amber-300" id="soilMoisture">32%</span>
              </div>
              <div class="flex items-center justify-between">
                <span class="text-sm">Air Quality Index</span>
                <span class="text-sm font-medium text-yellow-300" id="aqiValue">78</span>
              </div>
              <div class="flex items-center justify-between">
                <span class="text-sm">UV Index</span>
                <span class="text-sm font-medium text-red-300" id="uvIndex">8.5</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Prediction Chart -->
        <div class="glass-panel rounded-xl p-4 md:p-6">
          <h3 class="text-lg font-semibold mb-4">Temperature Trend Forecast</h3>
          <div class="chart-container">
            <div class="flex items-center justify-center h-full text-slate-400">
              <div class="text-center">
                <svg class="w-12 h-12 md:w-16 md:h-16 mx-auto mb-4 text-slate-600" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M3.5 18.49l6-6.01 4 4L22 6.92l-1.41-1.41-7.09 7.97-4-4L3.5 15.9l.01 2.59z"/>
                </svg>
                <p class="text-base md:text-lg font-medium">Interactive Chart</p>
                <p class="text-sm">Temperature predictions over time</p>
                <p class="text-xs mt-2 opacity-75">Chart visualization with Chart.js or D3.js</p>
              </div>
            </div>
          </div>
        </div>

        <!-- AI Insights -->
        <div class="glass-panel rounded-xl p-4 md:p-6">
          <h3 class="text-lg font-semibold mb-4 flex items-center gap-2">
            <svg class="w-5 h-5 text-purple-400" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
            </svg>
            AI Insights & Recommendations
          </h3>
          <div id="aiInsights" class="space-y-3 md:space-y-4">
            <div class="bg-blue-500/10 border border-blue-500/20 rounded-lg p-3 md:p-4">
              <div class="flex items-start gap-3">
                <div class="w-2 h-2 rounded-full bg-blue-400 mt-2"></div>
                <div>
                  <h4 class="font-medium text-blue-300 mb-1">Climate Pattern Analysis</h4>
                  <p class="text-sm text-slate-300">The current La Niña conditions are expected to persist through the forecast period, leading to cooler sea surface temperatures in the Pacific and altered precipitation patterns across North America.</p>
                </div>
              </div>
            </div>
            <div class="bg-amber-500/10 border border-amber-500/20 rounded-lg p-3 md:p-4">
              <div class="flex items-start gap-3">
                <div class="w-2 h-2 rounded-full bg-amber-400 mt-2"></div>
                <div>
                  <h4 class="font-medium text-amber-300 mb-1">Wildfire Preparedness</h4>
                  <p class="text-sm text-slate-300">Elevated fire risk detected due to prolonged dry conditions and above-average temperatures. Recommend implementing fire prevention measures and monitoring vegetation moisture levels.</p>
                </div>
              </div>
            </div>
            <div class="bg-emerald-500/10 border border-emerald-500/20 rounded-lg p-3 md:p-4">
              <div class="flex items-start gap-3">
                <div class="w-2 h-2 rounded-full bg-emerald-400 mt-2"></div>
                <div>
                  <h4 class="font-medium text-emerald-300 mb-1">Agricultural Impact</h4>
                  <p class="text-sm text-slate-300">Favorable growing conditions expected for most crops, with adequate precipitation and moderate temperatures. Consider adjusting planting schedules to optimize yield potential.</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Export & Share -->
        <div class="glass-panel rounded-xl p-4 md:p-6">
          <h3 class="text-lg font-semibold mb-4">Export & Share</h3>
          <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
            <button class="px-4 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 rounded-lg text-sm font-medium transition-all duration-200 hover:scale-105">
              <svg class="w-4 h-4 inline mr-2" fill="currentColor" viewBox="0 0 24 24">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6z"/>
              </svg>
              Download PDF Report
            </button>
            <button class="px-4 py-3 bg-gradient-to-r from-emerald-600 to-green-600 hover:from-emerald-500 hover:to-green-500 rounded-lg text-sm font-medium transition-all duration-200 hover:scale-105">
              <svg class="w-4 h-4 inline mr-2" fill="currentColor" viewBox="0 0 24 24">
                <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
              </svg>
              Export Data (CSV)
            </button>
            <button class="px-4 py-3 bg-gradient-to-r from-purple-600 to-violet-600 hover:from-purple-500 hover:to-violet-500 rounded-lg text-sm font-medium transition-all duration-200 hover:scale-105">
              <svg class="w-4 h-4 inline mr-2" fill="currentColor" viewBox="0 0 24 24">
                <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.50-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"/>
              </svg>
              Share Prediction
            </button>
            <button class="px-4 py-3 bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-500 hover:to-orange-500 rounded-lg text-sm font-medium transition-all duration-200 hover:scale-105">
              <svg class="w-4 h-4 inline mr-2" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
              </svg>
              Set Alert Notifications
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Loading Overlay -->
  <div id="loadingOverlay" class="hidden fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center">
    <div class="glass-panel rounded-xl p-6 md:p-8 text-center">
      <div class="w-16 h-16 border-4 border-blue-500/20 border-t-blue-500 rounded-full animate-spin mx-auto mb-4"></div>
      <h3 class="text-lg font-semibold mb-2">Generating AI Prediction</h3>
      <p class="text-sm text-slate-400">Analyzing climate data and environmental patterns...</p>
    </div>
  </div>

  <script>
    // Gemini API Configuration
    const GEMINI_API_KEY = 'AIzaSyCGYNwiZz-LZSURDdQZhmLVFTRI6cjtqm8';
    const GEMINI_API_URL = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent';

    // Real weather and climate data APIs
    const OPENWEATHER_API_KEY = 'your_openweather_key'; // You'll need to get this
    const NASA_API_KEY = 'DEMO_KEY'; // Replace with real NASA API key

    // Gemini API call function
    async function callGeminiAPI(prompt) {
      try {
        const response = await fetch(`${GEMINI_API_URL}?key=${GEMINI_API_KEY}`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            contents: [{
              parts: [{
                text: prompt
              }]
            }],
            generationConfig: {
              temperature: 0.7,
              topK: 40,
              topP: 0.95,
              maxOutputTokens: 1024,
            }
          })
        });

        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }

        const data = await response.json();
        return data.candidates[0].content.parts[0].text;
      } catch (error) {
        console.error('Gemini API Error:', error);
        return 'Unable to generate prediction at this time. Please try again later.';
      }
    }

    // Get real weather data
    async function getWeatherData(lat, lon) {
      try {
        const response = await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${OPENWEATHER_API_KEY}&units=metric`);
        if (response.ok) {
          return await response.json();
        }
      } catch (error) {
        console.error('Weather API Error:', error);
      }
      
      // Fallback to mock data if API fails
      return {
        main: { temp: 22.5, humidity: 68, pressure: 1013 },
        weather: [{ main: 'Clear', description: 'clear sky' }],
        wind: { speed: 3.2 }
      };
    }

    // Get NASA satellite data
    async function getNASAData(lat, lon, date) {
      try {
        // Example: MODIS/Terra data
        const response = await fetch(`https://api.nasa.gov/planetary/earth/assets?lon=${lon}&lat=${lat}&date=${date}&dim=0.10&api_key=${NASA_API_KEY}`);
        if (response.ok) {
          return await response.json();
        }
      } catch (error) {
        console.error('NASA API Error:', error);
      }
      
      return null;
    }

    // Generate real AI prediction
    async function generateRealPrediction(location, timeframe, predictionType) {
      const coordinates = await geocodeLocation(location);
      if (!coordinates) return null;

      const { lat, lon } = coordinates;
      
      // Get current weather data
      const weatherData = await getWeatherData(lat, lon);
      
      // Get NASA satellite data
      const today = new Date().toISOString().split('T')[0];
      const nasaData = await getNASAData(lat, lon, today);

      // Create comprehensive prompt for Gemini
      const prompt = `
        As an expert climate scientist and environmental analyst, provide a detailed prediction for ${location} (${lat}, ${lon}) over the next ${timeframe}.

        Current conditions:
        - Temperature: ${weatherData.main.temp}°C
        - Humidity: ${weatherData.main.humidity}%
        - Pressure: ${weatherData.main.pressure} hPa
        - Weather: ${weatherData.weather[0].description}
        - Wind Speed: ${weatherData.wind.speed} m/s

        Please provide:
        1. Temperature trend prediction with specific values
        2. Precipitation forecast with amounts
        3. Environmental risk assessment (wildfire, flood, storm risks)
        4. Vegetation health outlook
        5. Air quality predictions
        6. Confidence levels for each prediction
        7. Key factors influencing these predictions

        Focus on ${predictionType} analysis. Provide quantitative data where possible and explain the scientific reasoning behind your predictions.

        Format your response as a structured analysis with clear sections and specific numerical predictions.
      `;

      try {
        const aiResponse = await callGeminiAPI(prompt);
        return {
          prediction: aiResponse,
          coordinates: { lat, lon },
          currentWeather: weatherData,
          nasaData: nasaData
        };
      } catch (error) {
        console.error('Prediction generation error:', error);
        return null;
      }
    }

    // Geocoding function
    async function geocodeLocation(location) {
      try {
        // Using a free geocoding service
        const response = await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(location)}&limit=1`);
        const data = await response.json();
        
        if (data && data.length > 0) {
          return {
            lat: parseFloat(data[0].lat),
            lon: parseFloat(data[0].lon)
          };
        }
      } catch (error) {
        console.error('Geocoding error:', error);
      }
      
      // Fallback coordinates (San Francisco)
      return { lat: 37.7749, lon: -122.4194 };
    }

    // Update UI with real predictions
    function updatePredictionResults(predictionData) {
      if (!predictionData) return;

      // Update prediction cards
      const tempValue = document.getElementById('tempValue');
      const precipValue = document.getElementById('precipValue');
      const humidityValue = document.getElementById('humidityValue');

      if (tempValue) {
        const currentTemp = predictionData.currentWeather.main.temp;
        tempValue.textContent = `${currentTemp.toFixed(1)}°C`;
      }

      if (humidityValue) {
        humidityValue.textContent = `${predictionData.currentWeather.main.humidity}%`;
      }

      // Update AI insights section
      const aiInsights = document.getElementById('aiInsights');
      if (aiInsights) {
        aiInsights.innerHTML = `
          <div class="bg-blue-500/10 border border-blue-500/20 rounded-lg p-3 md:p-4">
            <div class="flex items-start gap-3">
              <div class="w-2 h-2 rounded-full bg-blue-400 mt-2"></div>
              <div>
                <h4 class="font-medium text-blue-300 mb-1">AI Climate Analysis</h4>
                <div class="text-sm text-slate-300 whitespace-pre-line">${predictionData.prediction}</div>
              </div>
            </div>
          </div>
        `;
      }

      // Update coordinates display
      const latInput = document.getElementById('latInput');
      const lonInput = document.getElementById('lonInput');
      if (latInput && lonInput) {
        latInput.value = predictionData.coordinates.lat.toFixed(4);
        lonInput.value = predictionData.coordinates.lon.toFixed(4);
      }
    }

    // Show placeholder data immediately
    function showPlaceholderData() {
      // Update prediction cards with placeholder data
      const tempValue = document.getElementById('tempValue');
      const precipValue = document.getElementById('precipValue');
      const humidityValue = document.getElementById('humidityValue');
      const sstValue = document.getElementById('sstValue');
      const ndviValue = document.getElementById('ndviValue');
      const soilMoisture = document.getElementById('soilMoisture');
      const aqiValue = document.getElementById('aqiValue');
      const uvIndex = document.getElementById('uvIndex');

      if (tempValue) tempValue.textContent = '22.5°C';
      if (precipValue) precipValue.textContent = '145mm';
      if (humidityValue) humidityValue.textContent = '68%';
      if (sstValue) sstValue.textContent = '+1.2°C';
      if (ndviValue) ndviValue.textContent = '0.67';
      if (soilMoisture) soilMoisture.textContent = '32%';
      if (aqiValue) aqiValue.textContent = '78';
      if (uvIndex) uvIndex.textContent = '8.5';

      // Update AI insights with placeholder
      const aiInsights = document.getElementById('aiInsights');
      if (aiInsights) {
        aiInsights.innerHTML = `
          <div class="bg-blue-500/10 border border-blue-500/20 rounded-lg p-3 md:p-4">
            <div class="flex items-start gap-3">
              <div class="w-2 h-2 rounded-full bg-blue-400 mt-2"></div>
              <div>
                <h4 class="font-medium text-blue-300 mb-1">Loading AI Analysis...</h4>
                <p class="text-sm text-slate-300">Processing climate data and generating predictions...</p>
              </div>
            </div>
          </div>
        `;
      }
    }

    // Main functionality
    document.addEventListener('DOMContentLoaded', function() {
      const generateBtn = document.getElementById('generateBtn');
      const loadingOverlay = document.getElementById('loadingOverlay');
      const locationInput = document.getElementById('locationInput');
      const latInput = document.getElementById('latInput');
      const lonInput = document.getElementById('lonInput');
      const useLocationBtn = document.getElementById('useLocationBtn');
      const predictionTypeInputs = document.querySelectorAll('input[name="predictionType"]');
      const forecastSelect = document.getElementById('forecastPeriod');
      const startDateInput = document.getElementById('startDate');
      const endDateInput = document.getElementById('endDate');

      if (generateBtn) {
        generateBtn.addEventListener('click', async function() {
          const location = locationInput.value.trim() || 'San Francisco, CA';
          const selectedType = document.querySelector('input[name="predictionType"]:checked')?.value || 'climate';
          const timeframe = forecastSelect.value || '30';

          loadingOverlay.classList.remove('hidden');

          try {
            // Generate real AI prediction
            const predictionData = await generateRealPrediction(location, `${timeframe} days`, selectedType);

            if (predictionData) {
              updatePredictionResults(predictionData);
            }
          } catch (error) {
            console.error('Prediction error:', error);
            alert('Unable to generate prediction. Please check your internet connection and try again.');
          } finally {
            loadingOverlay.classList.add('hidden');
          }
        });
      }

      // Use current location
      if (useLocationBtn) {
        useLocationBtn.addEventListener('click', function() {
          if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function(position) {
              latInput.value = position.coords.latitude.toFixed(4);
              lonInput.value = position.coords.longitude.toFixed(4);
              locationInput.value = `${position.coords.latitude.toFixed(4)}, ${position.coords.longitude.toFixed(4)}`;
            }, function(error) {
              alert('Unable to get your location. Please enter coordinates manually.');
            });
          } else {
            alert('Geolocation is not supported by this browser.');
          }
        });
      }

      // Set default dates
      const today = new Date();
      const nextWeek = new Date(today.getTime() + 7 * 24 * 60 * 60 * 1000);

      if (startDateInput) startDateInput.value = today.toISOString().split('T')[0];
      if (endDateInput) endDateInput.value = nextWeek.toISOString().split('T')[0];

      // Export buttons
      document.querySelectorAll('[class*="from-blue-600"], [class*="from-green-600"], [class*="from-purple-600"], [class*="from-orange-600"]').forEach(btn => {
        if (btn.textContent.includes('Download') || btn.textContent.includes('Export') || btn.textContent.includes('Share') || btn.textContent.includes('Set Alert')) {
          btn.addEventListener('click', function(e) {
            e.preventDefault();
            alert('Export functionality would be implemented here');
          });
        }
      });

      // Show placeholder data immediately
      showPlaceholderData();
      
      // Auto-generate prediction for default location on page load
      setTimeout(() => {
        if (generateBtn) generateBtn.click();
      }, 2000);
    });
  </script>
</body>
</html>